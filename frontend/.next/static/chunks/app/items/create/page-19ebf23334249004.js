(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{6430:(e,t,a)=>{Promise.resolve().then(a.bind(a,9271))},6648:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(5601),s=a.n(r)},7138:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(231),s=a.n(r)},8064:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{callServer:function(){return r.callServer},createServerReference:function(){return l},findSourceMapURL:function(){return s.findSourceMapURL}});let r=a(4590),s=a(6705),l=a(6671).createServerReference},5601:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return n},getImageProps:function(){return i}});let r=a(9920),s=a(497),l=a(8173),c=r._(a(1241));function i(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:c.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let n=l.Image},9271:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var r=a(7437),s=a(7034),l=a(6323),c=a(9690),i=a(108);let n=e=>{e(!1)},o=e=>{let{error:t,setError:a}=e;return t?(0,r.jsxs)("div",{className:"absolute w-full h-full bg-red-300 top-0 flex flex-col justify-center [&>*]:mb-4",children:[(0,r.jsx)("p",{children:"処理に失敗しました"}),(0,r.jsx)("p",{children:"もう一度やり直してください"}),(0,r.jsx)("button",{onClick:()=>n(a),className:"w-48 h-10 bg-my-yellow rounded-full mx-auto",children:"戻る"})]}):null};var d=a(8682);let u=async(e,t)=>{e.preventDefault();let a=new FormData(e.currentTarget),r=a.get(t);if(r&&r.size>1048576)return alert(i.RZ.IMAGE_SIZE_TOO_LARGE);500===await (0,d.Z)(a,t,"","itemCreate")?alert(i.RZ.ITEM_CREATION_FAILED):alert(i.RZ.CREATED_BUT_FAILED_TO_UPLOAD_IMAGE)},h=e=>{let{children:t}=e,a="item-create",s="item_image";return(0,r.jsxs)("form",{autoComplete:"off",className:"mx-auto flex flex-col h-full min-h-[calc(64px*8+76px+56px)] justify-around Y-tab:grid Y-tab:grid-cols-2 Y-tab:gap-4 Y-tab:min-h-[calc(64px*5+20px)]",id:a,name:a,onSubmit:e=>u(e,s),children:[t,(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:a,className:"leading-tight bg-my-light-green w-60 block mx-auto rounded-lg mt-4",children:"アップロード画像を選択"}),(0,r.jsx)("input",{accept:i.SL.join(","),type:"file",id:a,name:s,className:"file:opacity-0 file:block file:bg-my-orange file:h-0 file:border-0 h-[40px] mx-auto rounded-[40px] pl-10 bg-my-orange leading-normal cursor-pointer w-60"})]}),(0,r.jsx)("button",{className:"block h-[40px] w-60 rounded-3xl bg-my-orange mx-auto mt-4",type:"submit",children:(0,r.jsx)("p",{children:"登録!"})})]})};var m=a(9809);let x=e=>({data:e||{},hasData:!1,isShow:!0,choiced:""}),p=async(e,t,a,r,s)=>{if("characters"===e&&a&&!a.choiced){alert("作品を先に選択してください！");return}"series"===e&&r&&s&&s({data:{...r.data},hasData:!0,isShow:!1,choiced:""}),t(x(await (0,m.B)(e,null==a?void 0:a.choiced)))},f=e=>{let{endpoint:t,state:a,handleSetState:s,inputName:l,seriesList:c,labelValue:i,charactersList:n,handleSetCharactersList:o}=e,d=a.data[a.choiced];return(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:i,className:"h-5 mt-1",children:i}),(0,r.jsxs)("button",{className:"bg-[#5271ff] w-60 bg-opacity-80 block mx-auto w-60 h-[40px] py-2 rounded-3xl text-center hover:opacity-80",onClick:()=>p(t,s,c,n,o),type:"button",children:[(0,r.jsx)("input",{className:"h-[1px] w-[1px] opacity-[0.1]",name:l,defaultValue:a.choiced,form:"item-create",required:!0,id:i}),d]})]})};var g=a(8064);let b=(0,g.createServerReference)("7fae13b5726e73e30e96f57a9996a03dc2a0cbbc0b",g.callServer,void 0,g.findSourceMapURL,"default"),j=e=>{let{inputName:t,categoriesList:a,setCategoriesList:s,endpoint:l,setError:c}=e;return(0,r.jsxs)("form",{action:async e=>{let r=await b(e,l,[t])||i.jy;if(r===i.jy){let e={data:a.data,hasData:!0,isShow:!1,choiced:a.choiced};c(!0),s(e)}else{let e={...a.data};e[r.category_id]=r.category_name,s({data:e,hasData:!0,isShow:!1,choiced:r.category_id})}},className:"flex w-full h-12 items-center justify-center",children:[(0,r.jsx)("input",{name:t,className:"bg-my-light-green h-10 rounded-xl text-center",type:"text",placeholder:"新しく作成する！"}),(0,r.jsx)("button",{className:"bg-my-orange w-40 h-10 rounded-full",type:"submit",children:"作成する！"})]})},_=e=>{let{charactersList:t,setChractersList:a,setError:s,choiced:l}=e;return(0,r.jsxs)("form",{action:async e=>{let r=["series_id","is_new_series","character_name","is_new_character"];if(!e.get(r[2]))return;e.append(r[0],l),e.append(r[1],"false"),e.append(r[3],"true");let c=await b(e,"series-characters",r)||i.jy;if(c===i.jy){let e={data:t.data,hasData:!0,isShow:!1,choiced:t.choiced};s(!0),a(e)}else{var n;let r={...t.data},s=c.character_id;r[s]=(null===(n=e.get("character_name"))||void 0===n?void 0:n.toString())||"",a({data:r,hasData:!0,isShow:!1,choiced:s})}},className:"flex w-full h-12 items-center justify-center",children:[(0,r.jsx)("input",{name:"character_name",className:"bg-my-light-green h-10 rounded-xl text-center",type:"text",placeholder:"新しく作成する！"}),(0,r.jsx)("button",{className:"bg-my-orange w-40 h-10 rounded-full",type:"submit",children:"作成する！"})]})},y=e=>{let{seriesList:t,setSeriesList:a,charactersList:s,setCharactersList:l,setError:c}=e;return(0,r.jsxs)("form",{action:async e=>{let r=["series_name","is_new_series","character_name","is_new_character"];if(!e.get(r[0])||!e.get(r[2]))return;e.append(r[1],"true"),e.append(r[3],"true");let n=await b(e,"series-characters",r)||i.jy;if(n===i.jy){let e={data:t.data,hasData:!0,isShow:!1,choiced:t.choiced};c(!0),a(e)}else{var o,d;let c=n.series_id,i=(null===(o=e.get(r[0]))||void 0===o?void 0:o.toString())||"",u={data:{...t.data},hasData:!0,isShow:!1,choiced:c};u.data[c]=i;let h=n.character_id,m=(null===(d=e.get(r[2]))||void 0===d?void 0:d.toString())||"",x={data:{...s.data},hasData:!0,isShow:!1,choiced:h};x.data[h]=m,a(u),l(x)}},className:"w-full items-center justify-center [&>*]:mx-2 [&>*]:mb-2 X-tab:flex X-tab:h-12 Y-tab:flex Y-tab:h-12",children:[(0,r.jsx)("input",{name:"series_name",className:"bg-my-light-green h-10 rounded-xl text-center",type:"text",placeholder:"新しく作成: 作品名",required:!0}),(0,r.jsx)("input",{name:"character_name",className:"bg-my-light-green h-10 rounded-xl text-center",type:"text",placeholder:"新しく作成: キャラクター名",required:!0}),(0,r.jsx)("button",{className:"bg-my-orange w-40 h-10 rounded-full",type:"submit",children:"作成する！"})]})},w=()=>(0,r.jsxs)("div",{className:"w-full max-w-[400px] mt-10 mx-auto rounded-lg p-2 bg-green-700 [&>*]:text-white [&>*]:mb-2 [&>*]:p-2 Y-tab:[&>p]:text-lg Y-tab:max-w-[560px] X-tab:[&>p]:text-lg",children:[(0,r.jsx)("h1",{className:"text-2xl",children:"☆グッズの仕様のご案内☆"}),(0,r.jsx)("p",{children:"グッズの情報は共有で利用されます。"}),(0,r.jsx)("p",{children:"作成したグッズの情報は変更・削除できません。"}),(0,r.jsxs)("p",{children:["ただし詳細ページで変更すると、あなたにとっての見た目のみが変更されます。",(0,r.jsx)("br",{}),"例えば登録済みのグッズのカテゴリー名を変更した場合、",(0,r.jsx)("br",{}),"カテゴリーの所属が変わるわけではなくて、見た目の名前が変わります。",(0,r.jsx)("br",{}),"その為、同じカテゴリーに所属する他のグッズのところでもその名前で表示されます。"]})]}),v=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t(a?{data:e.data,hasData:!0,isShow:!1,choiced:""}:{data:e.data,hasData:!0,isShow:!1,choiced:e.choiced})},S=e=>{let{state:t,setState:a,charactersList:s,setChractersList:l}=e;return(0,r.jsx)("button",{onClick:()=>{v(t,a),l&&s&&v(s,l,!0)},type:"button",className:"bg-[#5271ff] w-48 h-10 opacity-4/5 rounded-full",children:(0,r.jsx)("p",{children:"選択を解除して戻る"})})},N=(e,t,a)=>{a({data:t.data,hasData:!0,isShow:!1,choiced:e})},X=e=>{let{id:t,value:a,state:s,setState:l}=e;return(0,r.jsx)("button",{id:t,onClick:()=>N(t,s,l),type:"button",className:"block mx-auto rounded-full w-60 h-8 bg-my-yellow mb-2",children:a})},L=e=>{let{children:t,state:a,setState:s,listName:l,charactersList:c,setChractersList:i}=e;if(!a.isShow)return null;let n=[];for(let e in a.data){let t=a.data[e];n.push([e,t])}let o=n.map(e=>{let[t,l]=e;return(0,r.jsx)(X,{id:t,value:l,state:a,setState:s},t)});return(0,r.jsxs)("section",{className:"h-full w-full rounded-xl absolute z-index-10 p-4 bg-my-light-blue top-0 overflow-auto",children:[(0,r.jsxs)("h2",{className:"bg-my-yellow w-4/5 min-w-[360px] mx-auto rounded-full mb-4 select-none",children:["作成するグッズの",l,"を選んで下さい"]}),o,(0,r.jsxs)("div",{children:[t,(0,r.jsx)(S,{state:a,setState:s,charactersList:c,setChractersList:i})]})]})};var D=a(2265);let E=()=>{let[e,t]=(0,D.useState)({data:{},hasData:!1,isShow:!1,choiced:""}),[a,n]=(0,D.useState)({data:{},hasData:!1,isShow:!1,choiced:""}),[d,u]=(0,D.useState)({data:{},hasData:!1,isShow:!1,choiced:""}),[m,x]=(0,D.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{headerContent:(0,r.jsx)(c.Z,{}),viewContent:(0,r.jsx)(w,{}),naviContent:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(h,{children:[(0,r.jsx)(f,{endpoint:"series",state:e,handleSetState:t,inputName:i.FX.series,labelValue:"作品名(必須)",charactersList:a,handleSetCharactersList:n}),(0,r.jsx)(f,{endpoint:"characters",state:a,handleSetState:n,inputName:i.FX.character,seriesList:e,labelValue:"キャラ名(必須)"}),(0,r.jsx)(s.Z,{inputName:i.FX.name,labelValue:"商品名(必須)",required:!0,placeholder:i.QT.noDuplication}),(0,r.jsx)(s.Z,{inputName:i.FX.tags,labelValue:"タグ",placeholder:i.QT.isListFormat}),(0,r.jsx)(f,{endpoint:"category",state:d,handleSetState:u,inputName:i.FX.category,labelValue:"グッズカテゴリー(必須)"}),(0,r.jsx)(s.Z,{inputName:i.FX.janCode,type:"number",pattern:"[a-zA-Z0-9]*",labelValue:"JANコード(修正不可)",placeholder:i.QT.isDigits}),(0,r.jsx)(s.Z,{inputName:i.FX.releaseDate,type:"date",labelValue:"発売日(修正不可)"}),(0,r.jsx)(s.Z,{inputName:i.FX.retailers,labelValue:"購入場所",placeholder:i.QT.isListFormat})]})}),footerContent:!0}),(0,r.jsx)(L,{state:e,setState:t,listName:"作品名",charactersList:a,setChractersList:n,children:(0,r.jsx)(y,{seriesList:e,setSeriesList:t,charactersList:a,setCharactersList:n,setError:x})}),(0,r.jsx)(L,{state:a,setState:n,listName:"キャラクター名",children:(0,r.jsx)(_,{charactersList:a,setChractersList:n,setError:x,choiced:e.choiced})}),(0,r.jsx)(L,{state:d,setState:u,listName:"カテゴリー名",children:(0,r.jsx)(j,{inputName:"category_name",categoriesList:d,setCategoriesList:u,endpoint:"categories",setError:x})}),(0,r.jsx)(o,{error:m,setError:x})]})}},7034:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(7437),s=a(1353);let l=e=>{let{addClass:t="",labelValue:a="",defaultValue:l="",inputName:c,type:i="text",pattern:n,required:o=!1,formId:d,inputId:u,placeholder:h="",maxLength:m=30}=e,x=(0,s.Z)("block bg-my-light-green w-60 h-[40px] rounded-3xl text-center py-2 hover:opacity-80",t);return(0,r.jsxs)("div",{className:"w-60 mx-auto",children:[(0,r.jsx)("label",{htmlFor:u,className:"h-5 mt-1 overflow-auto w-full",children:a}),(0,r.jsx)("input",{className:x,placeholder:h,name:c,type:i,defaultValue:l,pattern:n||void 0,maxLength:m,required:o,form:d,id:u})]})}},614:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(7437),s=a(1353),l=a(7138);let c=e=>{let{children:t,href:a,addClass:c=""}=e,i=(0,s.Z)("block bg-my-yellow w-60 h-[40px] mx-auto rounded-3xl overflow-hidden hover:opacity-80",c);return(0,r.jsx)(l.default,{href:a,className:i,children:(0,r.jsx)("p",{className:"py-2",children:t})})}},6323:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(7437),s=a(6648);let l=()=>(0,r.jsx)(s.default,{fill:!0,src:"/MonitorDecorationsImage.svg",alt:"モニターの台座・コード・びりびりマークの見た目を表現する画像です"}),c=()=>(0,r.jsx)(s.default,{fill:!0,src:"/PowerButtonImage.svg",alt:"電源ボタンの見た目を表現する画像です",className:"hidden X-tab:block row-start-3 col-start-6 col-end-7"}),i=e=>{let{headerContent:t,viewContent:a,naviContent:s,footerContent:i}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"".concat("grid relative w-full h-full rounded-[50px] bg-my-light-blue grid-rows-[40px_5fr_20px_4fr_40px] grid-cols-[20px_30px_1fr_30px_20px]"," ").concat("X-mob:grid-rows-[40px_1fr_40px] X-mob:grid-cols-[50px_5fr_20px_4fr_50px]"," ").concat("X-tab:h-[calc(100%-50px)] X-tab:grid-rows-[40px_1fr_40px] X-tab:grid-cols-[20px_5fr_54fr_20px_26fr_6fr_20px]"),children:[(0,r.jsx)("section",{className:"flex items-center justify-end col-start-3 col-end-4 X-tab:col-end-6 X-mob:col-start-4 X-mob:col-end-5",children:t}),(0,r.jsx)("section",{className:"".concat("bg-my-gray rounded-[32px] overflow-auto relative row-start-2 row-end-3 col-start-2 col-end-5"," X-tab:col-end-4 X-mob:col-end-3"),children:a}),(0,r.jsx)("section",{className:"".concat("bg-my-gray rounded-[32px] overflow-auto row-start-4 row-end-5 col-start-2 col-end-5"," ").concat("X-mob:row-start-2 X-mob:row-end-3 X-mob:col-start-4 X-mob:col-end-5"," ").concat("X-tab:row-start-2 X-tab:row-end-3 X-tab:col-start-5 X-tab:col-end-7"," "),children:s}),(0,r.jsx)("section",{className:"flex justify-end row-start-5 col-start-3 col-end-4 X-tab:row-start-3 X-tab:col-end-6 X-mob:row-start-1 X-mob:row-end-2 X-mob:col-start-2 X-mob:col-end-3",children:i}),(0,r.jsx)(c,{})]}),(0,r.jsx)("div",{className:"relative w-full h-[50px] hidden X-tab:block",children:(0,r.jsx)(l,{})})]})}},9690:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(7437),s=a(614);let l=()=>(0,r.jsx)(s.Z,{href:"/",addClass:"w-[136px] mr-0 max-h-[32px] leading-none",children:"TOPへ"})},108:(e,t,a)=>{"use strict";a.d(t,{BJ:()=>d,FX:()=>l,II:()=>r,QT:()=>h,RZ:()=>u,Rw:()=>c,SL:()=>i,cy:()=>s,f1:()=>n,jy:()=>o});let r="http://localhost:3000/api/",s=["series_name","character_name","item_name","tags","category_id","jan_code","release_date","retailers"],l={series:"item_series",character:"item_character",name:"item_name",tags:"tags",category:"category",janCode:"jan_code",releaseDate:"release_date",retailers:"retailers",image:"item_images"},c={name:"user_name",email:"email",pass1:"password1",pass2:"password2"},i=["image/png","image/jpg","image/jpeg"],n="(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",o={category_id:"dummy",category_name:"dummy",character_id:"dummy",series_id:"dummy",access_token:"dummy"},d="/no-image.svg",u={IMAGE_SIZE_TOO_LARGE:"画像のサイズが大きすぎます。\n1MB未満にしてください。",ITEM_CREATION_FAILED:"グッズの作成に失敗しました。\n再度お試しください。",CREATED_BUT_FAILED_TO_UPLOAD_IMAGE:"グッズは作成できましたが、画像の登録に失敗しました。\n再度お試しください。"},h={isPartialMatch:"部分一致検索",isListFormat:"小カンマ(,)で複数の指定",isDigits:"8桁 or 13桁の半角数字",noDuplication:"既存の名前と重複不可"}},1353:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(e,t)=>""===e||""===t?"".concat(e).concat(t):"".concat(e," ").concat(t)},9809:(e,t,a)=>{"use strict";a.d(t,{B:()=>l,y:()=>s});var r=a(108);let s=async function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l="".concat(r.II).concat(e),c=new URLSearchParams(t);c.set("currentPage",a.toString());let i="".concat(l,"?").concat(c),n=""===s?await fetch(i):await fetch(i,{headers:{cookie:s}});return 200!==n.status?null:n.json()},l=async(e,t)=>{let a="".concat(r.II,"items/create?endpoint=").concat(e).concat(t?"&seriesId=".concat(t):""),s=await fetch(a);return 200!==s.status?null:s.json()}},8682:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(8064);let s=(0,r.createServerReference)("7f8b45dfd89d116bed0a4ddee33cf0decaaf4b2db5",r.callServer,void 0,r.findSourceMapURL,"default")}},e=>{var t=t=>e(e.s=t);e.O(0,[30,130,215,744],()=>t(6430)),_N_E=e.O()}]);
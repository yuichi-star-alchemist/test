(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{4098:(e,t,a)=>{Promise.resolve().then(a.bind(a,5991))},6648:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var l=a(5601),r=a.n(l)},7138:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var l=a(231),r=a.n(l)},5601:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return i},getImageProps:function(){return c}});let l=a(9920),r=a(497),s=a(8173),n=l._(a(1241));function c(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let i=s.Image},2435:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var l=a(7437);let r=e=>{let{itemsToAddToCollectionList:t,setItemsToAddToCollectionList:a,itemId:r}=e;return(0,l.jsx)("input",{type:"checkbox",className:"block h-8 aspect-square",checked:t.includes(r),onChange:()=>{t.includes(r)?a(t.filter(e=>e!==r)):a([...t,r])}})}},7034:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var l=a(7437),r=a(1353);let s=e=>{let{addClass:t="",labelValue:a="",defaultValue:s="",inputName:n,type:c="text",pattern:i,required:o=!1,formId:d,inputId:u,placeholder:m="",maxLength:x=30}=e,h=(0,r.Z)("block bg-my-light-green w-60 h-[40px] rounded-3xl text-center py-2 hover:opacity-80",t);return(0,l.jsxs)("div",{className:"w-60 mx-auto",children:[(0,l.jsx)("label",{htmlFor:u,className:"h-5 mt-1 overflow-auto w-full",children:a}),(0,l.jsx)("input",{className:h,placeholder:m,name:n,type:c,defaultValue:s,pattern:i||void 0,maxLength:x,required:o,form:d,id:u})]})}},614:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var l=a(7437),r=a(1353),s=a(7138);let n=e=>{let{children:t,href:a,addClass:n=""}=e,c=(0,r.Z)("block bg-my-yellow w-60 h-[40px] mx-auto rounded-3xl overflow-hidden hover:opacity-80",n);return(0,l.jsx)(s.default,{href:a,className:c,children:(0,l.jsx)("p",{className:"py-2",children:t})})}},6323:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var l=a(7437),r=a(6648);let s=()=>(0,l.jsx)(r.default,{fill:!0,src:"/MonitorDecorationsImage.svg",alt:"モニターの台座・コード・びりびりマークの見た目を表現する画像です"}),n=()=>(0,l.jsx)(r.default,{fill:!0,src:"/PowerButtonImage.svg",alt:"電源ボタンの見た目を表現する画像です",className:"hidden X-tab:block row-start-3 col-start-6 col-end-7"}),c=e=>{let{headerContent:t,viewContent:a,naviContent:r,footerContent:c}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("section",{className:"".concat("grid relative w-full h-full rounded-[50px] bg-my-light-blue grid-rows-[40px_5fr_20px_4fr_40px] grid-cols-[20px_30px_1fr_30px_20px]"," ").concat("X-mob:grid-rows-[40px_1fr_40px] X-mob:grid-cols-[50px_5fr_20px_4fr_50px]"," ").concat("X-tab:h-[calc(100%-50px)] X-tab:grid-rows-[40px_1fr_40px] X-tab:grid-cols-[20px_5fr_54fr_20px_26fr_6fr_20px]"),children:[(0,l.jsx)("section",{className:"flex items-center justify-end col-start-3 col-end-4 X-tab:col-end-6 X-mob:col-start-4 X-mob:col-end-5",children:t}),(0,l.jsx)("section",{className:"".concat("bg-my-gray rounded-[32px] overflow-auto relative row-start-2 row-end-3 col-start-2 col-end-5"," X-tab:col-end-4 X-mob:col-end-3"),children:a}),(0,l.jsx)("section",{className:"".concat("bg-my-gray rounded-[32px] overflow-auto row-start-4 row-end-5 col-start-2 col-end-5"," ").concat("X-mob:row-start-2 X-mob:row-end-3 X-mob:col-start-4 X-mob:col-end-5"," ").concat("X-tab:row-start-2 X-tab:row-end-3 X-tab:col-start-5 X-tab:col-end-7"," "),children:r}),(0,l.jsx)("section",{className:"flex justify-end row-start-5 col-start-3 col-end-4 X-tab:row-start-3 X-tab:col-end-6 X-mob:row-start-1 X-mob:row-end-2 X-mob:col-start-2 X-mob:col-end-3",children:c}),(0,l.jsx)(n,{})]}),(0,l.jsx)("div",{className:"relative w-full h-[50px] hidden X-tab:block",children:(0,l.jsx)(s,{})})]})}},6903:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var l=a(7437),r=a(1353);let s=e=>{let{children:t,addClass:a=""}=e,s=(0,r.Z)("block bg-my-orange w-60 h-[40px] rounded-3xl mx-auto mt-4 py-2 hover:opacity-80",a);return(0,l.jsx)("button",{className:s,type:"submit",children:(0,l.jsx)("p",{children:t})})}},7463:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var l=a(7437),r=a(1353),s=a(7138);let n=e=>{let{children:t,href:a,addClass:n=""}=e,c=(0,r.Z)("max-w-[640px] min-h-[40px] bg-my-light-green pl-1 py-1 flex items-center justify-center rounded-3xl hover:opacity-80",n);return(0,l.jsx)(s.default,{href:a,className:c,children:(0,l.jsx)("p",{children:t})})}},9690:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var l=a(7437),r=a(614);let s=()=>(0,l.jsx)(r.Z,{href:"/",addClass:"w-[136px] mr-0 max-h-[32px] leading-none",children:"TOPへ"})},108:(e,t,a)=>{"use strict";a.d(t,{BJ:()=>d,FX:()=>s,II:()=>l,QT:()=>m,RZ:()=>u,Rw:()=>n,SL:()=>c,cy:()=>r,f1:()=>i,jy:()=>o});let l="http://localhost:3000/api/",r=["series_name","character_name","item_name","tags","category_id","jan_code","release_date","retailers"],s={series:"item_series",character:"item_character",name:"item_name",tags:"tags",category:"category",janCode:"jan_code",releaseDate:"release_date",retailers:"retailers",image:"item_images"},n={name:"user_name",email:"email",pass1:"password1",pass2:"password2"},c=["image/png","image/jpg","image/jpeg"],i="(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",o={category_id:"dummy",category_name:"dummy",character_id:"dummy",series_id:"dummy",access_token:"dummy"},d="/no-image.svg",u={IMAGE_SIZE_TOO_LARGE:"画像のサイズが大きすぎます。\n1MB未満にしてください。",ITEM_CREATION_FAILED:"グッズの作成に失敗しました。\n再度お試しください。",CREATED_BUT_FAILED_TO_UPLOAD_IMAGE:"グッズは作成できましたが、画像の登録に失敗しました。\n再度お試しください。"},m={isPartialMatch:"部分一致検索",isListFormat:"小カンマ(,)で複数の指定",isDigits:"8桁 or 13桁の半角数字",noDuplication:"既存の名前と重複不可"}},7975:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var l=a(7437);let r=e=>{let{children:t}=e;return(0,l.jsx)("ul",{className:"h-[calc(100%-24px)] p-2 flex flex-col justify-around overflow-auto",children:t})}},7470:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var l=a(7437);let r=e=>{let{children:t}=e;return(0,l.jsx)("li",{className:"flex items-center justify-center mt-2 gap-2",children:t})}},6437:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var l=a(7437);let r=(e,t)=>{let a=[];return a.push(e>1?1:0),a.push(e>2?e-1:0),a.push(t-1>e?e+1:0),a.push(t>e?t:0),a};var s=a(1353);let n=(e,t,a)=>{t({currentPage:a,maxPage:e.maxPage})},c=e=>{let{children:t,addClass:a="",pageState:r,handleSetPageState:c,newCurrentPage:i,liClass:o}=e,d=(0,s.Z)("block h-6 bg-my-yellow rounded-full text-sm hover:opacity-80",a);return(0,l.jsx)("li",{className:o,children:(0,l.jsx)("button",{onClick:()=>n(r,c,i),className:d,children:(0,l.jsx)("p",{children:t})})})},i=e=>{let{pageState:t,handleSetPageState:a}=e,{currentPage:s,maxPage:n}=t,i=r(s,n),o=0===i[0]?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c,{addClass:"w-16",pageState:t,handleSetPageState:a,newCurrentPage:i[0],liClass:"col-start-2",children:"First"}),(0,l.jsx)("p",{className:"select-none col-start-3",children:"..."})]}),d=0===i[1]?null:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c,{addClass:"w-8",pageState:t,handleSetPageState:a,newCurrentPage:i[1],liClass:"col-start-4",children:i[1].toString()})}),u=0===i[2]?null:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c,{addClass:"w-8",pageState:t,handleSetPageState:a,newCurrentPage:i[2],liClass:"col-start-6",children:i[2].toString()})}),m=0===i[3]?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"select-none col-start-7",children:"..."}),(0,l.jsx)(c,{addClass:"w-20",pageState:t,handleSetPageState:a,newCurrentPage:i[3],liClass:"col-start-8",children:"Last.".concat(n)})]});return(0,l.jsxs)("ol",{className:"grid h-6 grid-cols-[1fr_120px_24px_repeat(3,48px)_24px_120px_1fr] [&>*]:mx-auto",children:[o,d,(0,l.jsx)("p",{className:"block w-8 h-6 bg-my-light-green rounded-full leading-relaxed text-sm select-none col-start-5",children:s}),u,m]})}},5991:(e,t,a)=>{"use strict";a.d(t,{default:()=>C});var l=a(7437),r=a(7034),s=a(614),n=a(6323),c=a(6903),i=a(9690),o=a(108),d=a(7975),u=a(6437),m=a(2265);let x=async(e,t,a,l)=>{var r;e.preventDefault();let s=new FormData(e.currentTarget);if("default"===(null===(r=s.get("list-id"))||void 0===r?void 0:r.toString())){alert("リストを選択してください");return}let n="".concat(o.II,"list-items");s.set("listItems",t.join(",")),await fetch(n,{method:"POST",body:s}).then(e=>{200===e.status?(a([]),l("default")):alert("コレクションリストに追加できませんでした")})},h=e=>{for(let[t]of e)if(o.cy.includes(t))return!0;return!1};var p=a(9809);let g=e=>{let t={items:[{id:"",item_name:""}],maxPage:1};return e&&e.items&&(t.items=e.items,e.all_pages&&(t.maxPage=e.all_pages)),t},f=async function(e,t,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return 0!==t.size&&h(t)?g(await (0,p.y)(e,t,a.currentPage,l)):g()},j=e=>{let{inputName:t,categoryListObject:a}=e;return(0,l.jsxs)("div",{className:"w-60 mx-auto",children:[(0,l.jsx)("label",{htmlFor:"category-select",className:"h-5 mt-1 overflow-auto w-full",children:"グッズカテゴリー"}),(0,l.jsxs)("select",{className:"block bg-my-light-green w-60 h-[40px] rounded-3xl text-center py-2 hover:opacity-80",name:t,id:"category-select",children:[(0,l.jsx)("option",{value:"default",children:"指定しない"}),Object.entries(a).map(e=>{let[t,a]=e;return(0,l.jsx)("option",{value:t,children:a},t)})]})]})};var b=a(2435),y=a(7463),w=a(7470),_=a(6648);let v=e=>{let{imageUrl:t}=e;return(0,l.jsx)("div",{className:"w-[120px] h-[120px]",children:(0,l.jsx)(m.Suspense,{children:(0,l.jsx)(_.default,{src:t,alt:"グッズの画像です！",width:120,height:120})})})},N=e=>{let{itemList:t,itemsToAddToCollectionList:a,setItemsToAddToCollectionList:r,currentImageUrlList:s}=e;return t.map((e,t)=>""===e.id?null:(0,l.jsxs)(w.Z,{children:[(0,l.jsx)(y.Z,{href:"items/".concat(e.id),addClass:"w-[calc(100%-168px)]",children:e.item_name}),(0,l.jsx)(b.Z,{itemsToAddToCollectionList:a,setItemsToAddToCollectionList:r,itemId:e.id}),(0,l.jsx)(v,{imageUrl:s[t]})]},e.id))},S=(e,t)=>{e.preventDefault();let a=new FormData(e.currentTarget),l=new URLSearchParams;for(let[e,t]of a.entries())""!==t&&("category_id"!==e||"default"!==t)&&l.append(e,t.toString());t(l)},P=e=>{let{children:t,handleSetSearchInput:a}=e;return(0,l.jsx)("form",{className:"h-[calc(100%*9/12)] min-h-[calc(64px*9)] flex flex-col justify-around Y-tab:grid Y-tab:grid-cols-2 Y-tab:h-[calc(100%*5/6)] Y-tab:min-h-[320px]",onSubmit:e=>S(e,a),id:"itemSearch",children:t})},Z=e=>{let{collectionLists:t,selectList:a,setSelectList:r}=e,s=t.map(e=>{let[t,a]=Object.entries(e)[0];return(0,l.jsx)("option",{value:t,children:a},t)});return(0,l.jsxs)("select",{className:"mx-auto mt-4 py-2 h-[40px] w-60 rounded-3xl bg-my-orange text-center hover:opacity-80",id:"list_id",name:"list-id",required:!0,value:a,onChange:e=>r(e.currentTarget.value),children:[(0,l.jsx)("option",{value:"default",children:"追加先リスト選択"}),s]})},C=e=>{let{initialSearchInput:t,initialItemList:a,initialPageState:h,seriesName:p,characterName:g,collectionLists:b,initialImageUrlList:y,categoryListObject:w}=e,_=(0,m.useRef)(!0),[v,S]=(0,m.useState)(a),[C,I]=(0,m.useState)(t),[X,T]=(0,m.useState)(h),[L,k]=(0,m.useState)([]),[F,A]=(0,m.useState)("default"),[E,O]=(0,m.useState)(y);return(0,m.useEffect)(()=>{if(_.current){_.current=!1;return}(async()=>{var e;let t=await f("items",C,X);if(t.maxPage&&t.maxPage!==X.maxPage){let e={currentPage:X.currentPage,maxPage:X.maxPage};e.maxPage=t.maxPage,T(e)}S((null===(e=t.items[0])||void 0===e?void 0:e.id)===""?[]:t.items)})()},[X,C]),(0,m.useEffect)(()=>{if(_.current){_.current=!1;return}(async()=>{let e=Array(10).fill(o.BJ);for(let t=0;t<v.length;t++){let a=v[t].id;if(""===a)return;let l=await fetch("/api/getImageUrl?endpoint=images/".concat(a)),r=200!==l.status?o.BJ:(await l.json()).split("localhost").join("s3-minio");e[t]=r}O(e)})()},[v]),(0,l.jsx)(n.Z,{headerContent:(0,l.jsx)(i.Z,{}),viewContent:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Z,{children:(0,l.jsx)(N,{itemList:v,itemsToAddToCollectionList:L,setItemsToAddToCollectionList:k,currentImageUrlList:E})}),(0,l.jsx)(u.Z,{pageState:X,handleSetPageState:T})]}),naviContent:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"h-full",children:[(0,l.jsxs)(P,{handleSetSearchInput:I,children:[(0,l.jsx)(r.Z,{addClass:"Y-tab:col-start-2",defaultValue:p||"",type:"search",inputName:o.cy[0],labelValue:"作品名",placeholder:o.QT.isPartialMatch}),(0,l.jsx)(r.Z,{defaultValue:g||"",type:"search",inputName:o.cy[1],labelValue:"キャラ名",placeholder:o.QT.isPartialMatch}),(0,l.jsx)(r.Z,{type:"search",inputName:o.cy[2],labelValue:"商品名",placeholder:o.QT.isPartialMatch}),(0,l.jsx)(r.Z,{type:"search",inputName:o.cy[3],labelValue:"タグ",placeholder:o.QT.isListFormat}),(0,l.jsx)(j,{inputName:o.cy[4],categoryListObject:w}),(0,l.jsx)(r.Z,{type:"number",inputName:o.cy[5],pattern:"[a-zA-Z0-9]*",labelValue:"JANコード",maxLength:13}),(0,l.jsx)(r.Z,{type:"date",inputName:o.cy[6],labelValue:"発売日(以前検索)"}),(0,l.jsx)(r.Z,{type:"search",inputName:o.cy[7],labelValue:"購入場所",placeholder:o.QT.isListFormat}),(0,l.jsx)(c.Z,{children:"検索する！"})]}),(0,l.jsxs)("div",{className:"min-h-[calc(56px*3)] flex flex-col h-[calc(100%*3/12)] Y-tab:flex-row Y-tab:min-h-[56px] Y-tab:h-[calc(100%/6)]",children:[(0,l.jsx)(s.Z,{href:"/lists",addClass:"mt-4 w-60",children:"コレクションリスト作成"}),(0,l.jsxs)("form",{onSubmit:e=>x(e,L,k,A),className:"Y-tab:mx-auto Y-tab:translate-y-[-50%] Y-tab:h-[200%] Y-tab:grid Y-tab:grid-rows-2",children:[(0,l.jsx)(Z,{collectionLists:b,selectList:F,setSelectList:A}),(0,l.jsx)(c.Z,{children:"選択項目をリストに追加"})]})]})]})}),footerContent:!0})}},1353:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});let l=(e,t)=>""===e||""===t?"".concat(e).concat(t):"".concat(e," ").concat(t)},9809:(e,t,a)=>{"use strict";a.d(t,{B:()=>s,y:()=>r});var l=a(108);let r=async function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s="".concat(l.II).concat(e),n=new URLSearchParams(t);n.set("currentPage",a.toString());let c="".concat(s,"?").concat(n),i=""===r?await fetch(c):await fetch(c,{headers:{cookie:r}});return 200!==i.status?null:i.json()},s=async(e,t)=>{let a="".concat(l.II,"items/create?endpoint=").concat(e).concat(t?"&seriesId=".concat(t):""),r=await fetch(a);return 200!==r.status?null:r.json()}}},e=>{var t=t=>e(e.s=t);e.O(0,[30,130,215,744],()=>t(4098)),_N_E=e.O()}]);